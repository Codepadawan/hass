#############################################################
# garage door
#############################################################

  - platform: template
    sensors:
      garage_door_state:
        value_template: >-
          {% if states.input_boolean.garage_stopped.state == 'on' %}
            Stopped
          {% elif states.input_boolean.garage_opening.state == 'on' %}
            Opening
          {% elif states.input_boolean.garage_closing.state == 'on' %}
            Closing
          {% elif states.binary_sensor.garage_closed_sensor.state == 'on' %}
            Closed
          {% elif states.binary_sensor.garage_open_sensor.state == 'on' %}
            Open
          {% else %}
            Stopped
          {% endif %}
        icon_template: >-
          {% if states.input_boolean.garage_stopped.state == 'on' %}
            mdi:garage-alert
          {% elif states.input_boolean.garage_opening.state == 'on' %}
            mdi:garage-open
          {% elif states.input_boolean.garage_closing.state == 'on' %}
            mdi:garage-open
          {% elif states.binary_sensor.garage_closed_sensor.state == 'on' %}
            mdi:garage
          {% elif states.binary_sensor.garage_open_sensor.state == 'on' %}
            mdi:garage-open
          {% else %}
            mdi:garage-alert
          {% endif %}

#############################################################
# pool
#############################################################

  - platform: mqtt
    state_topic: "pool/temperature"
    name: "Swimming Pool Temperature"
    unit_of_measurement: "Â°C"

#############################################################
# gmail
#############################################################

  - platform: imap
    name: email_personal
    server: imap.gmail.com
    port: 993
    username: !secret gmail_username
    password: !secret gmail_password

#############################################################
# fitbit
#############################################################

  - platform: fitbit
    name: fitbit
    clock_format: 24H
    monitored_resources:
      - "activities/steps"

#############################################################
# HA update
#############################################################


  - platform: rest
    resource: https://pypi.python.org/pypi/homeassistant/json
    name: HA Latest Version
    value_template: '{{ value_json.info.version }}'

  - platform: version
    name: HA Installed Version

  - platform: template
    sensors:
      ha_update_available:
        value_template: >-
          {%- if states.sensor.ha_latest_version.state != "unavailable" -%}
            {%- if states.sensor.ha_latest_version.state != states.sensor.ha_installed_version.state and "b" not in states.sensor.ha_latest_version.state -%}
              Yes
            {%- else -%}
              No
            {%- endif -%}
          {%- endif -%}
        icon_template: >-
          {%- if states.sensor.ha_latest_version.state != states.sensor.ha_installed_version.state -%}
            mdi:alert-box
          {% else %}
            mdi:approval
          {% endif %}